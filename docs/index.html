<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>cbor</title><meta name="description" content="Documentation for cbor"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/search.js" id="tsd-search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">cbor</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-content">
<div class="tsd-page-title">
<h2>cbor</h2></div>
<div class="tsd-panel tsd-typography"><a id="md:cbor" class="tsd-anchor"></a><h1><a href="#md:cbor">cbor</a></h1><p>Encode and parse data in the Concise Binary Object Representation (CBOR) data format (<a href="https://www.rfc-editor.org/rfc/rfc8949.html">RFC8949</a>).</p>
<a id="md:supported-nodejs-versions" class="tsd-anchor"></a><h2><a href="#md:supported-nodejs-versions">Supported Node.js versions</a></h2><p>This project now only supports versions of Node that the Node team is
<a href="https://github.com/nodejs/Release#release-schedule">currently supporting</a>.
Ava&#39;s <a href="https://github.com/avajs/ava/blob/main/docs/support-statement.md">support
statement</a>
is what we will be using as well.  Currently, that means Node <code>16</code>+ is
required.  If you need to support an older version of Node (back to version
6), use cbor version 5.2.x.  If you need commonjs support, use cbor v9.0.x.
Neither of these versions will get anything but high-severity security updates
from here on out.</p>
<p>However note: cbor-web may be a valid option if you want the latest code
and commonjs support.</p>
<a id="md:installation" class="tsd-anchor"></a><h2><a href="#md:installation">Installation:</a></h2><pre><code class="language-bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-3">--save</span><span class="hl-1"> </span><span class="hl-2">cbor</span>
</code><button>Copy</button></pre>
<p><strong>NOTE</strong>
If you are going to use this on the web, use <a href="../cbor-web">cbor-web</a> instead.</p>
<p>If you need support for encoding and decoding BigDecimal fractions (tag 4) or
BigFloats (tag 5), please see <a href="../cbor-bigdecimal">cbor-bigdecimal</a>.</p>
<a id="md:documentation" class="tsd-anchor"></a><h2><a href="#md:documentation">Documentation:</a></h2><p>See the full API <a href="http://hildjj.github.io/node-cbor/">documentation</a>.</p>
<p>For a command-line interface, see <a href="../cbor-cli">cbor-cli</a>.</p>
<p>Example:</p>
<pre><code class="language-js"><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-4">as</span><span class="hl-1"> </span><span class="hl-5">cbor</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;cbor&#39;</span><br/><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-5">assert</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;assert&#39;</span><br/><br/><span class="hl-3">let</span><span class="hl-1"> </span><span class="hl-5">encoded</span><span class="hl-1"> = </span><span class="hl-5">cbor</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-3">true</span><span class="hl-1">) </span><span class="hl-6">// Returns &lt;Buffer f5&gt;</span><br/><span class="hl-5">cbor</span><span class="hl-1">.</span><span class="hl-0">decodeFirst</span><span class="hl-1">(</span><span class="hl-5">encoded</span><span class="hl-1">, (</span><span class="hl-5">error</span><span class="hl-1">, </span><span class="hl-5">obj</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">// If there was an error, error != null</span><br/><span class="hl-1">  </span><span class="hl-6">// obj is the unpacked object</span><br/><span class="hl-1">  </span><span class="hl-5">assert</span><span class="hl-1">.</span><span class="hl-0">ok</span><span class="hl-1">(</span><span class="hl-5">obj</span><span class="hl-1"> === </span><span class="hl-3">true</span><span class="hl-1">)</span><br/><span class="hl-1">})</span><br/><br/><span class="hl-6">// Use integers as keys?</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">m</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Map</span><span class="hl-1">()</span><br/><span class="hl-5">m</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-8">2</span><span class="hl-1">)</span><br/><span class="hl-5">encoded</span><span class="hl-1"> = </span><span class="hl-5">cbor</span><span class="hl-1">.</span><span class="hl-0">encode</span><span class="hl-1">(</span><span class="hl-5">m</span><span class="hl-1">) </span><span class="hl-6">// &lt;Buffer a1 01 02&gt;</span>
</code><button>Copy</button></pre>
<p>Allows streaming as well:</p>
<pre><code class="language-js"><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-4">as</span><span class="hl-1"> </span><span class="hl-5">cbor</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;cbor&#39;</span><br/><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-5">fs</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;fs&#39;</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">d</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">cbor</span><span class="hl-1">.</span><span class="hl-0">Decoder</span><span class="hl-1">()</span><br/><span class="hl-5">d</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;data&#39;</span><span class="hl-1">, </span><span class="hl-5">obj</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-5">obj</span><span class="hl-1">)</span><br/><span class="hl-1">})</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">s</span><span class="hl-1"> = </span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-0">createReadStream</span><span class="hl-1">(</span><span class="hl-2">&#39;foo&#39;</span><span class="hl-1">)</span><br/><span class="hl-5">s</span><span class="hl-1">.</span><span class="hl-0">pipe</span><span class="hl-1">(</span><span class="hl-5">d</span><span class="hl-1">)</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">d2</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">cbor</span><span class="hl-1">.</span><span class="hl-0">Decoder</span><span class="hl-1">({</span><span class="hl-5">input:</span><span class="hl-1"> </span><span class="hl-2">&#39;00&#39;</span><span class="hl-1">, </span><span class="hl-5">encoding:</span><span class="hl-1"> </span><span class="hl-2">&#39;hex&#39;</span><span class="hl-1">})</span><br/><span class="hl-5">d</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;data&#39;</span><span class="hl-1">, </span><span class="hl-5">obj</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-5">obj</span><span class="hl-1">)</span><br/><span class="hl-1">})</span>
</code><button>Copy</button></pre>
<p>There is also support for synchronous decodes:</p>
<pre><code class="language-js"><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-5">cbor</span><span class="hl-1">.</span><span class="hl-0">decodeFirstSync</span><span class="hl-1">(</span><span class="hl-2">&#39;02&#39;</span><span class="hl-1">)) </span><span class="hl-6">// 2</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-5">cbor</span><span class="hl-1">.</span><span class="hl-0">decodeAllSync</span><span class="hl-1">(</span><span class="hl-2">&#39;0202&#39;</span><span class="hl-1">)) </span><span class="hl-6">// [2, 2]</span><br/><span class="hl-1">} </span><span class="hl-4">catch</span><span class="hl-1"> (</span><span class="hl-5">e</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">// Throws on invalid input</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>The sync encoding and decoding are exported as a
<a href="https://github.com/Level/levelup#custom_encodings">leveldb encoding</a>, as
<code>cbor.leveldb</code>.</p>
<a id="md:highwatermark" class="tsd-anchor"></a><h2><a href="#md:highwatermark">highWaterMark</a></h2><p>The synchronous routines for encoding and decoding will have problems with
objects that are larger than 16kB, which the default buffer size for Node
streams.  There are a few ways to fix this:</p>
<ol>
<li>pass in a <code>highWaterMark</code> option with the value of the largest buffer size you think you will need:</li>
</ol>
<pre><code class="language-js"><span class="hl-5">cbor</span><span class="hl-1">.</span><span class="hl-0">encodeOne</span><span class="hl-1">(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">ArrayBuffer</span><span class="hl-1">(</span><span class="hl-8">40000</span><span class="hl-1">), {</span><span class="hl-5">highWaterMark:</span><span class="hl-1"> </span><span class="hl-8">65535</span><span class="hl-1">})</span>
</code><button>Copy</button></pre>
<ol start="2">
<li>use stream mode.  Catch the <code>data</code>, <code>finish</code>, and <code>error</code> events.  Make sure to call <code>end()</code> when you&#39;re done.</li>
</ol>
<pre><code class="language-js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">enc</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">cbor</span><span class="hl-1">.</span><span class="hl-0">Encoder</span><span class="hl-1">()</span><br/><span class="hl-5">enc</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;data&#39;</span><span class="hl-1">, </span><span class="hl-5">buf</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-6">/* Send the data somewhere */</span><span class="hl-1"> </span><span class="hl-3">null</span><span class="hl-1">)</span><br/><span class="hl-5">enc</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;error&#39;</span><span class="hl-1">, </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">)</span><br/><span class="hl-5">enc</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;finish&#39;</span><span class="hl-1">, () </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-6">/* Tell the consumer we are finished */</span><span class="hl-1"> </span><span class="hl-3">null</span><span class="hl-1">)</span><br/><br/><span class="hl-5">enc</span><span class="hl-1">.</span><span class="hl-0">end</span><span class="hl-1">([</span><span class="hl-2">&#39;foo&#39;</span><span class="hl-1">, </span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-3">false</span><span class="hl-1">])</span>
</code><button>Copy</button></pre>
<ol start="3">
<li>use <code>encodeAsync()</code>, which uses the approach from approach 2 to return a memory-inefficient promise for a Buffer.</li>
</ol>
<a id="md:supported-types" class="tsd-anchor"></a><h2><a href="#md:supported-types">Supported types</a></h2><p>The following types are supported for encoding:</p>
<ul>
<li>boolean</li>
<li>number (including -0, NaN, and ±Infinity)</li>
<li>string</li>
<li>Array, Set (encoded as Array)</li>
<li>Object (including null), Map</li>
<li>undefined</li>
<li>Buffer</li>
<li>Date,</li>
<li>RegExp</li>
<li>URL</li>
<li>TypedArrays, ArrayBuffer, DataView</li>
<li>Map, Set</li>
<li>BigInt</li>
</ul>
<p>Decoding supports the above types, including the following CBOR tag numbers:</p>
<table>
<thead>
<tr>
<th>Tag</th>
<th>Generated Type</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>Date</td>
</tr>
<tr>
<td>1</td>
<td>Date</td>
</tr>
<tr>
<td>2</td>
<td>BigInt</td>
</tr>
<tr>
<td>3</td>
<td>BigInt</td>
</tr>
<tr>
<td>21</td>
<td>Tagged, with toJSON</td>
</tr>
<tr>
<td>22</td>
<td>Tagged, with toJSON</td>
</tr>
<tr>
<td>23</td>
<td>Tagged, with toJSON</td>
</tr>
<tr>
<td>28</td>
<td>Original object, with SharedValueEncoder</td>
</tr>
<tr>
<td>29</td>
<td>Same original object, with SharedValueEncoder</td>
</tr>
<tr>
<td>32</td>
<td>URL</td>
</tr>
<tr>
<td>33</td>
<td>Tagged</td>
</tr>
<tr>
<td>34</td>
<td>Tagged</td>
</tr>
<tr>
<td>35</td>
<td>RegExp</td>
</tr>
<tr>
<td>64</td>
<td>Uint8Array</td>
</tr>
<tr>
<td>65</td>
<td>Uint16Array</td>
</tr>
<tr>
<td>66</td>
<td>Uint32Array</td>
</tr>
<tr>
<td>67</td>
<td>BigUint64Array</td>
</tr>
<tr>
<td>68</td>
<td>Uint8ClampedArray</td>
</tr>
<tr>
<td>69</td>
<td>Uint16Array</td>
</tr>
<tr>
<td>70</td>
<td>Uint32Array</td>
</tr>
<tr>
<td>71</td>
<td>BigUint64Array</td>
</tr>
<tr>
<td>72</td>
<td>Int8Array</td>
</tr>
<tr>
<td>73</td>
<td>Int16Array</td>
</tr>
<tr>
<td>74</td>
<td>Int32Array</td>
</tr>
<tr>
<td>75</td>
<td>BigInt64Array</td>
</tr>
<tr>
<td>77</td>
<td>Int16Array</td>
</tr>
<tr>
<td>78</td>
<td>Int32Array</td>
</tr>
<tr>
<td>79</td>
<td>BigInt64Array</td>
</tr>
<tr>
<td>81</td>
<td>Float32Array</td>
</tr>
<tr>
<td>82</td>
<td>Float64Array</td>
</tr>
<tr>
<td>85</td>
<td>Float32Array</td>
</tr>
<tr>
<td>86</td>
<td>Float64Array</td>
</tr>
<tr>
<td>258</td>
<td>Set</td>
</tr>
</tbody></table>
<a id="md:adding-new-encoders" class="tsd-anchor"></a><h2><a href="#md:adding-new-encoders">Adding new Encoders</a></h2><p>There are several ways to add a new encoder:</p>
<a id="md:encodecbor-method" class="tsd-anchor"></a><h3><a href="#md:encodecbor-method"><code>encodeCBOR</code> method</a></h3><p>This is the easiest approach, if you can modify the class being encoded.  Add an
<code>encodeCBOR</code> method to your class, which takes a single parameter of the encoder
currently being used.  Your method should return <code>true</code> on success, else <code>false</code>.
Your method may call <code>encoder.push(buffer)</code> or <code>encoder.pushAny(any)</code> as needed.</p>
<p>For example:</p>
<pre><code class="language-js"><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-9">Foo</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">one</span><span class="hl-1"> = </span><span class="hl-8">1</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">two</span><span class="hl-1"> = </span><span class="hl-8">2</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-0">encodeCBOR</span><span class="hl-1">(</span><span class="hl-5">encoder</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">tagged</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Tagged</span><span class="hl-1">(</span><span class="hl-8">64000</span><span class="hl-1">, [</span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">one</span><span class="hl-1">, </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">two</span><span class="hl-1">])</span><br/><span class="hl-1">    </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">encoder</span><span class="hl-1">.</span><span class="hl-0">pushAny</span><span class="hl-1">(</span><span class="hl-5">tagged</span><span class="hl-1">)</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>You can also modify an existing type by monkey-patching an <code>encodeCBOR</code> function
onto its prototype, but this isn&#39;t recommended.</p>
<a id="md:addsemantictype" class="tsd-anchor"></a><h3><a href="#md:addsemantictype"><code>addSemanticType</code></a></h3><p>Sometimes, you want to support an existing type without modification to that
type.  In this case, call <code>addSemanticType(type, encodeFunction)</code> on an existing
<code>Encoder</code> instance. The <code>encodeFunction</code> takes an encoder and an object to
encode, for example:</p>
<pre><code class="language-js"><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-9">Bar</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">three</span><span class="hl-1"> = </span><span class="hl-8">3</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">enc</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Encoder</span><span class="hl-1">()</span><br/><span class="hl-5">enc</span><span class="hl-1">.</span><span class="hl-0">addSemanticType</span><span class="hl-1">(</span><span class="hl-5">Bar</span><span class="hl-1">, (</span><span class="hl-5">encoder</span><span class="hl-1">, </span><span class="hl-5">b</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">encoder</span><span class="hl-1">.</span><span class="hl-0">pushAny</span><span class="hl-1">(</span><span class="hl-5">b</span><span class="hl-1">.</span><span class="hl-5">three</span><span class="hl-1">)</span><br/><span class="hl-1">})</span>
</code><button>Copy</button></pre>
<a id="md:adding-new-decoders" class="tsd-anchor"></a><h2><a href="#md:adding-new-decoders">Adding new decoders</a></h2><p>Most of the time, you will want to add support for decoding a new tag type.  If
the Decoder class encounters a tag it doesn&#39;t support, it will generate a <code>Tagged</code>
instance that you can handle or ignore as needed.  To have a specific type
generated instead, pass a <code>tags</code> option to the <code>Decoder</code>&#39;s constructor, consisting
of an object with tag number keys and function values.  The function will be
passed the decoded value associated with the tag, and should return the decoded
value.  For the <code>Foo</code> example above, this might look like:</p>
<pre><code class="language-js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">d</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Decoder</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">tags:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">64000</span><span class="hl-5">:</span><span class="hl-1"> </span><span class="hl-5">val</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">// Check val to make sure it&#39;s an Array as expected, etc.</span><br/><span class="hl-1">      </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-7">foo</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">Foo</span><span class="hl-1">()</span><br/><span class="hl-1">      ;[</span><span class="hl-5">foo</span><span class="hl-1">.</span><span class="hl-5">one</span><span class="hl-1">, </span><span class="hl-5">foo</span><span class="hl-1">.</span><span class="hl-5">two</span><span class="hl-1">] = </span><span class="hl-5">val</span><br/><span class="hl-1">      </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-5">foo</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">})</span>
</code><button>Copy</button></pre>
<p>You can also replace the default decoders by passing in an appropriate tag
function.  For example:</p>
<pre><code class="language-js"><span class="hl-5">cbor</span><span class="hl-1">.</span><span class="hl-0">decodeFirstSync</span><span class="hl-1">(</span><span class="hl-5">input</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-5">tags:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">// Replace the Tag 0 (RFC3339 Date/Time string) decoder.</span><br/><span class="hl-1">    </span><span class="hl-6">// See https://tc39.es/proposal-temporal/docs/ for the upcoming</span><br/><span class="hl-1">    </span><span class="hl-6">// Temporal built-in, which supports nanosecond time:</span><br/><span class="hl-1">    </span><span class="hl-8">0</span><span class="hl-5">:</span><span class="hl-1"> </span><span class="hl-5">x</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-5">Temporal</span><span class="hl-1">.</span><span class="hl-5">Instant</span><span class="hl-1">.</span><span class="hl-0">from</span><span class="hl-1">(</span><span class="hl-5">x</span><span class="hl-1">),</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">})</span>
</code><button>Copy</button></pre>
<a id="md:developers" class="tsd-anchor"></a><h2><a href="#md:developers">Developers</a></h2><p>The tests for this package use a set of test vectors from RFC 8949 appendix A
by importing a machine readable version of them from
<a href="https://github.com/cbor/test-vectors">https://github.com/cbor/test-vectors</a>. For these tests to work, you will need
to use the command <code>git submodule update --init</code> after cloning or pulling this
code.   See <a href="https://gist.github.com/gitaarik/8735255#file-git_submodules-md">https://gist.github.com/gitaarik/8735255#file-git_submodules-md</a>
for more information.</p>
<p>Get a list of build steps with <code>npm run</code>.  I use <code>npm run dev</code>, which rebuilds,
runs tests, and refreshes a browser window with coverage metrics every time I
save a <code>.js</code> file.  If you don&#39;t want to run the fuzz tests every time, set
a <code>NO_GARBAGE</code> environment variable:</p>
<pre><code><span class="hl-5">env</span><span class="hl-1"> </span><span class="hl-7">NO_GARBAGE</span><span class="hl-1">=</span><span class="hl-8">1</span><span class="hl-1"> </span><span class="hl-5">npm</span><span class="hl-1"> </span><span class="hl-5">run</span><span class="hl-1"> </span><span class="hl-5">dev</span>
</code><button>Copy</button></pre>
<p><a href="https://github.com/hildjj/node-cbor/actions?query=workflow%3ATests"><img src="https://github.com/hildjj/node-cbor/workflows/Tests/badge.svg" alt="Build Status"></a>
<a href="https://coveralls.io/r/hildjj/node-cbor?branch=main"><img src="https://coveralls.io/repos/hildjj/node-cbor/badge.svg?branch=main" alt="Coverage Status"></a></p>
</div></div>
<div class="col-sidebar">
<div class="page-menu">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)" id="icon-chevronDown"></path></svg>Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="#icon-chevronDown"></use></svg>On This Page</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li>
<ul>
<li><a href="#md:cbor"><span>cbor</span></a></li>
<li>
<ul>
<li><a href="#md:supported-nodejs-versions"><span>Supported <wbr/>Node.js versions</span></a></li>
<li><a href="#md:installation"><span>Installation:</span></a></li>
<li><a href="#md:documentation"><span>Documentation:</span></a></li>
<li><a href="#md:highwatermark"><span>high<wbr/>Water<wbr/>Mark</span></a></li>
<li><a href="#md:supported-types"><span>Supported types</span></a></li>
<li><a href="#md:adding-new-encoders"><span>Adding new <wbr/>Encoders</span></a></li>
<li>
<ul>
<li><a href="#md:encodecbor-method"><span>encodeCBOR method</span></a></li>
<li><a href="#md:addsemantictype"><span>add<wbr/>Semantic<wbr/>Type</span></a></li></ul></li>
<li><a href="#md:adding-new-decoders"><span>Adding new decoders</span></a></li>
<li><a href="#md:developers"><span>Developers</span></a></li></ul></li></ul></li></ul></div></details></div>
<div class="site-menu">
<nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/hildjj/node-cbor" target="_blank">GitHub</a><a href="http://hildjj.github.io/node-cbor/" target="_blank">Documentation</a><a href="http://hildjj.github.io/node-cbor/example/" target="_blank">Playground</a><a href="http://cbor.io/" target="_blank">Spec</a></nav>
<nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><g id="icon-4"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-namespace)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.33 16V7.24H10.77L13.446 14.74C13.43 14.54 13.41 14.296 13.386 14.008C13.37 13.712 13.354 13.404 13.338 13.084C13.33 12.756 13.326 12.448 13.326 12.16V7.24H14.37V16H12.93L10.266 8.5C10.282 8.692 10.298 8.936 10.314 9.232C10.33 9.52 10.342 9.828 10.35 10.156C10.366 10.476 10.374 10.784 10.374 11.08V16H9.33Z" fill="var(--color-text)"></path></g></svg><span>cbor</span></a>
<ul class="tsd-small-nested-navigation">
<li><a href="modules/cbor.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>cbor</span></a></li>
<li><a href="modules/commented.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>commented</span></a></li>
<li><a href="modules/decoder.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>decoder</span></a></li>
<li><a href="modules/diagnose.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>diagnose</span></a></li>
<li><a href="modules/encoder.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-4"></use></svg><span>encoder</span></a></li></ul></nav></div></div></div>
<div class="tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div></body></html>